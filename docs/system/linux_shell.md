# 得会点Shell

# 从命令行开始

## 1 是什么
1. 是一种初级技巧，在操作服务器、运行脚本时
2. 是程序、脚本运行时的一种标记，其中包含了程序运行时所需要的额外信息
3. 并发所有的程序都需要命令行参数

## 2 为什么使用
1. 命令行参数能够是我们在不改变程序代码的情况下，提供不同的输入
2. 可以把命令行参数 类比 成 函数参数，这样容易理解


shell其实就是一种文本处理程序

shell既是命令语言又是程序设计语言

1. 命令语言：能够交互式的解释和执行用户输入命令
2. 程序设计语言：提供了变量和参数，还提供控制结构和函数

shell使用的熟练度反映了对Unix/Linux的使用熟练度

shell两种执行命令方式
1. 交互式：用户输入一条命令，shell解释执行一条
2. 批处理：shell去执行一个包含多条命令的shell脚本程序


## shell特点
1. 简单性：简洁的表达一个复杂的操作
2. 可移植性：遵循POSIX定义的功能，可以几乎无需修改就能运行在不同的系统上
3. 开发容易：短时间内完成一个功能强大的脚本

## 不适合用shell

1. 考虑到效率的资源密集型任务
2. 处理大任务的数学操作
3. 跨平台移植需求
4. 复杂的应用
5. 对于影响系统全局性的关键任务应用
6. 对于安全有很高要求的任务，比如你需要一个健壮的系统来防止入侵、破解、恶意破坏等等
7. 项目由连串的依赖的各个部分组成
8. 需要大规模的文件操作
9. 需要多维数组的支持
10. 需要数据结构的支持，比如链表或数等数据结构
11. 需要产生或操作图形化界面 GUI
12. 需要直接操作系统硬件
13. 需要 I/O 或socket 接口
14. 需要使用库或者遗留下来的老代码的接口
15. 私人的、闭源的应用（shell 脚本把代码就放在文本文件中，全世界都能看到)

# 又见变量?

#### 定义变量
变量名=变量值 #变量名和=之间不能有空格
如下：
name="zhang"
num=10
说明

1. 首个字母必须是(a-z,A-Z)
2. 中间不能有空格，可以有下划线
3. 不能用标点符号
4. 不能用关键字
#### 使用变量
在一个定义过的变量名前加**或者是∗∗或者是∗∗**或者是**{}**,其中{}是变量的边界描述
name="zhang"
$name
${name}
#### 重新定义变量
格式
原来变量名=新值
#### 只读变量
在一个变量前加**readonly**，将一个变量定义为不可更改
name="zhang"
readonly name #将name定义为不可修改
#### 删除变量
用unset命令删除一个变量
name="zhang"
unset name #删除变量name
#### 变量类型

1. 局部变量：仅在当前shell脚本中有效
2. 环境变量：系统中定义的变量，所有程序都可以访问
3. shell变量：shell程序设置的特殊变量，其中部分是局部变量，部分是环境变量
#### shell变量
| 变量名 | 含义 |
| --- | --- |
| $0 | 当前脚本的文件名 |
| 传递给脚本或函数的参数是一个正整数，n&#124;传递给脚本或函数的参数,n是一个正整数，n &#124; 传递给脚本或函数的参数,n是一个正整数，1表示第一个参数，类推 |  |
| $# | 传递给脚本或函数的参数的个数 |
| $* | 传递给脚本或函数的所有参数 |
| 传递给脚本或函数的所有参数，被双引号包含时，与@&#124;传递给脚本或函数的所有参数，被双引号包含时，与@ &#124; 传递给脚本或函数的所有参数，被双引号包含时，与*有不同 |  |
| $? | 上个命令的退出状态，或函数的返回值 |
| $$ | 当前shell进程的id |

##### 命令行参数
概念：
运行脚本时，传递给脚本的参数，用$n进行取值
##### 和∗和*和@区别

1. 不被""包含时，都以"1""1" "2"..."$n"形式输出
2. 被""包含时，"会以∗"会以"*"会以 "1 2...2 ... n"形式输出，"会以@"会以"@"会以"1" "2"..."2" ... "n"输出

print each param from "$*"
a b c d
print each param from "$@"
a
b
c
d
##### 退出状态
上一个命令或函数的返回结果，用$?获取，一般是0(失败)或1(成功)，也有其他类型错误
## Shell会自动替换？

替换

在表达式中包含特殊字符，shell将会进行替换，常见有变量替换、转义字符替换

用着echo中的替换

## 脚本文件的内容格式

## 格式

内容
1. 以 “#!”开头，后跟解释器的路径
2. shell的基本元素是命令，命令包含名称，选项，参数三个部分
3. 用#添加注释

基于bash解释器的shell脚本，必须以如下开头：

```shell 
#! /bin/bash
```

## 运行方式

1. 在脚本的目录下执行./name.sh
2. /bin/bash name.sh

## 参考资料

1. Linux系统命令及Shell脚本实践指南
